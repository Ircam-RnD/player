!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Player=t()}}(function(){return function t(e,s,i){function r(o,u){if(!s[o]){if(!e[o]){var a="function"==typeof require&&require;if(!u&&a)return a(o,!0);if(n)return n(o,!0);throw new Error("Cannot find module '"+o+"'")}var h=s[o]={exports:{}};e[o][0].call(h.exports,function(t){var s=e[o][1][t];return r(s?s:t)},h,h.exports,t,e,s,i)}return s[o].exports}for(var n="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e){"use strict";t("audio-context");var s=t("events"),i=function(t){function e(t){return Object.defineProperties(e.prototype,{source:{writable:!0},buffer:{writable:!0},gainNode:{writable:!0},outputNode:{writable:!0},speed:{writable:!0,value:1},gain:{writable:!0},loop:{writable:!0,value:!1},startPosition:{writable:!0,value:0},startedAtTime:{writable:!0,value:0},IS_PLAYING:{value:"is_playing"},IS_PAUSED:{value:"is_paused"},IS_STOPPED:{value:"is_stopped"},status:{writable:!0}}),this.status=this.IS_STOPPED,t&&this.setBuffer(t),this.gainNode=window.audioContext.createGain(),this.outputNode=window.audioContext.createGain(),this}var s=Object.defineProperty,i=function(t,e){for(var i in e)e.hasOwnProperty(i)&&s(t,i,Object.getOwnPropertyDescriptor(e,i));return t};return i(e,t),e.prototype=Object.create(t.prototype,{constructor:{value:e,configurable:!0,writable:!0}}),s(e,"prototype",{configurable:!1,enumerable:!1,writable:!1}),e.prototype.connect=function(t){return this.outputNode=t,this.gainNode.connect(this.outputNode||window.audioContext.destination),this},e.prototype.disconnect=function(t){return this.gainNode.disconnect(t),this},e.prototype.setBuffer=function(t){if(t)return this.buffer=t,this.bufferDuration=t.duration,this;throw new Error("Buffer setting error")},e.prototype.setGain=function(t){if(t)return this.gain=t,this.gainNode.gain.value=t*t,this;throw new Error("Gain setting error")},e.prototype.setSpeed=function(t){if(t)return this.speed=t,this.source&&(this.source.playbackRate.value=this.speed),this;throw new Error("Speed setting error")},e.prototype.enableLoop=function(t){return this.loop=t,this.status!==this.IS_STOPPED&&(this.source.loop=this.loop),this},e.prototype.start=function(){if(this.status!==this.IS_PLAYING){this.startedAtTime=window.audioContext.currentTime,this.source=window.audioContext.createBufferSource(),this.source.buffer=this.buffer,this.source.playbackRate.value=this.speed,this.source.loop=this.loop,this.source.connect(this.gainNode);var t=this.startPosition%this.buffer.duration;return this.source.start(0,t),this.status=this.IS_PLAYING,this.setOnendedCallback(),t}},e.prototype.stop=function(){return this.status===this.IS_PLAYING&&this.source.stop(0),this.status!==this.IS_STOPPED?(this.status=this.IS_STOPPED,this.startPosition=0,this.startPosition):void 0},e.prototype.pause=function(){return this.status===this.IS_PLAYING?(this.status=this.IS_PAUSED,this.source.stop(0),this.startPosition=this.startPosition+this.getElapsedDuration(),this.startPosition):void 0},e.prototype.seek=function(t){return this.status===this.IS_PLAYING?(this.stop(),this.startPosition=t%this.bufferDuration,this.start()):this.startPosition=t%this.bufferDuration,this.startPosition},e.prototype.getStatus=function(){return this.status},e.prototype.getElapsedDuration=function(){return window.audioContext.currentTime-this.startedAtTime},e.prototype.setOnendedCallback=function(){var t=this;this.source.onended=function(){t.status!==t.IS_PAUSED&&t.getElapsedDuration()+t.startPosition>t.bufferDuration&&(t.loop||(t.status=t.IS_STOPPED,t.startPosition=0),t.emit("ended",t.startPosition))}},e}(s.EventEmitter);e.exports=i},{"audio-context":2,events:3}],2:[function(t,e){var s=window.audioContext||new AudioContext;window.audioContext=s,e.exports=s},{}],3:[function(t,e){function s(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return"function"==typeof t}function r(t){return"number"==typeof t}function n(t){return"object"==typeof t&&null!==t}function o(t){return void 0===t}e.exports=s,s.EventEmitter=s,s.prototype._events=void 0,s.prototype._maxListeners=void 0,s.defaultMaxListeners=10,s.prototype.setMaxListeners=function(t){if(!r(t)||0>t||isNaN(t))throw TypeError("n must be a positive number");return this._maxListeners=t,this},s.prototype.emit=function(t){var e,s,r,u,a,h;if(this._events||(this._events={}),"error"===t&&(!this._events.error||n(this._events.error)&&!this._events.error.length))throw e=arguments[1],e instanceof Error?e:TypeError('Uncaught, unspecified "error" event.');if(s=this._events[t],o(s))return!1;if(i(s))switch(arguments.length){case 1:s.call(this);break;case 2:s.call(this,arguments[1]);break;case 3:s.call(this,arguments[1],arguments[2]);break;default:for(r=arguments.length,u=new Array(r-1),a=1;r>a;a++)u[a-1]=arguments[a];s.apply(this,u)}else if(n(s)){for(r=arguments.length,u=new Array(r-1),a=1;r>a;a++)u[a-1]=arguments[a];for(h=s.slice(),r=h.length,a=0;r>a;a++)h[a].apply(this,u)}return!0},s.prototype.addListener=function(t,e){var r;if(!i(e))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",t,i(e.listener)?e.listener:e),this._events[t]?n(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,n(this._events[t])&&!this._events[t].warned){var r;r=o(this._maxListeners)?s.defaultMaxListeners:this._maxListeners,r&&r>0&&this._events[t].length>r&&(this._events[t].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[t].length),"function"==typeof console.trace&&console.trace())}return this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(t,e){function s(){this.removeListener(t,s),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError("listener must be a function");var r=!1;return s.listener=e,this.on(t,s),this},s.prototype.removeListener=function(t,e){var s,r,o,u;if(!i(e))throw TypeError("listener must be a function");if(!this._events||!this._events[t])return this;if(s=this._events[t],o=s.length,r=-1,s===e||i(s.listener)&&s.listener===e)delete this._events[t],this._events.removeListener&&this.emit("removeListener",t,e);else if(n(s)){for(u=o;u-->0;)if(s[u]===e||s[u].listener&&s[u].listener===e){r=u;break}if(0>r)return this;1===s.length?(s.length=0,delete this._events[t]):s.splice(r,1),this._events.removeListener&&this.emit("removeListener",t,e)}return this},s.prototype.removeAllListeners=function(t){var e,s;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)"removeListener"!==e&&this.removeAllListeners(e);return this.removeAllListeners("removeListener"),this._events={},this}if(s=this._events[t],i(s))this.removeListener(t,s);else for(;s.length;)this.removeListener(t,s[s.length-1]);return delete this._events[t],this},s.prototype.listeners=function(t){var e;return e=this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},s.listenerCount=function(t,e){var s;return s=t._events&&t._events[e]?i(t._events[e])?1:t._events[e].length:0}},{}]},{},[1])(1)});